<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.33.0">

<link href="../css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../js/doc.js"></script>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>

  <meta id="repository-name" content="github.com/sstadick/crystal-lapper">
  <title>Lapper::Lapper(T) - github.com/sstadick/crystal-lapper</title>
  <script type="text/javascript">
    CrystalDoc.base_path = "../";
  </script>
</head>
<body>

<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="repository-links">
      <a href="../index.html">README</a>
    </div>
  </div>

  <div class="search-results" class="hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent open current" data-id="github.com/sstadick/crystal-lapper/Lapper" data-name="lapper">
      <a href="../Lapper.html">Lapper</a>
      
        <ul>
  
  <li class=" " data-id="github.com/sstadick/crystal-lapper/Lapper/Interval" data-name="lapper::interval(t)">
      <a href="../Lapper/Interval.html">Interval</a>
      
    </li>
  
  <li class=" current" data-id="github.com/sstadick/crystal-lapper/Lapper/Lapper" data-name="lapper::lapper(t)">
      <a href="../Lapper/Lapper.html">Lapper</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Lapper::Lapper(T)

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="../Lapper/Lapper.html">Lapper::Lapper(T)</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>




  <h2>
    <a id="overview" class="anchor" href="#overview">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Overview
  </h2>

  <p>Lapper is the primary data structure that contains the sorted Array of <code><a href="../Lapper/Interval.html">Interval</a>(T)</code></p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">20</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">10</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)</code></pre>














  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L114" target="_blank">
        lapper.cr
      </a>
    
    <br/>
  





  <h2>
    <a id="constructors" class="anchor" href="#constructors">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructors
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#new(intervals:Array(Lapper::Interval(T)),cursor:Int32=0,max_len:Int32=0)-class-method" class="signature"><strong>.new</strong>(intervals : Array(Lapper::Interval(T)), cursor : Int32 = <span class="n">0</span>, max_len : Int32 = <span class="n">0</span>)</a>
        
      </li>
    
  </ul>





  <h2>
    <a id="instance-method-summary" class="anchor" href="#instance-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#find(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method" class="signature"><strong>#find</strong>(start : Int32, stop : Int32, ivs : Array(Lapper::Interval(T)))</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#find(start:Int32,stop:Int32)-instance-method" class="signature"><strong>#find</strong>(start : Int32, stop : Int32)</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#find(start:Int32,stop:Int32,&)-instance-method" class="signature"><strong>#find</strong>(start : Int32, stop : Int32, &)</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#intervals:Array(Lapper::Interval(T))-instance-method" class="signature"><strong>#intervals</strong> : Array(Lapper::Interval(T))</a>
        
      </li>
    
      <li class="entry-summary">
        <a href="#seek(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method" class="signature"><strong>#seek</strong>(start : Int32, stop : Int32, ivs : Array(Lapper::Interval(T)))</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#seek(start:Int32,stop:Int32)-instance-method" class="signature"><strong>#seek</strong>(start : Int32, stop : Int32)</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#seek(start:Int32,stop:Int32,&)-instance-method" class="signature"><strong>#seek</strong>(start : Int32, stop : Int32, &)</a>
        
          <div class="summary"><p>Find all intervals that overlap start ..</p></div>
        
      </li>
    
  </ul>





<div class="methods-inherited">
  
    


    


    


  
    


    


    


  
</div>


  <h2>
    <a id="constructor-detail" class="anchor" href="#constructor-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Constructor Detail
  </h2>
  
    <div class="entry-detail" id="new(intervals:Array(Lapper::Interval(T)),cursor:Int32=0,max_len:Int32=0)-class-method">
      <div class="signature">
        
        def self.<strong>new</strong>(intervals : Array(<a href="../Lapper/Interval.html">Lapper::Interval</a>(T)), cursor : Int32 = <span class="n">0</span>, max_len : Int32 = <span class="n">0</span>)

        <a class="method-permalink" href="#new(intervals:Array(Lapper::Interval(T)),cursor:Int32=0,max_len:Int32=0)-class-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L117" target="_blank">View source</a>]
        
      </div>
    </div>
  





  <h2>
    <a id="instance-method-detail" class="anchor" href="#instance-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Instance Method Detail
  </h2>
  
    <div class="entry-detail" id="find(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method">
      <div class="signature">
        
        def <strong>find</strong>(start : Int32, stop : Int32, ivs : Array(<a href="../Lapper/Interval.html">Lapper::Interval</a>(T)))

        <a class="method-permalink" href="#find(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop.
Reuses an passed in array.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
lapper.find(<span class="n">5</span>, <span class="n">11</span>, <span class="o">[]</span> <span class="k">of</span> <span class="t">Interval</span>(<span class="t">Int32</span>)).size <span class="o">==</span> <span class="n">2</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L170" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="find(start:Int32,stop:Int32)-instance-method">
      <div class="signature">
        
        def <strong>find</strong>(start : Int32, stop : Int32)

        <a class="method-permalink" href="#find(start:Int32,stop:Int32)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop.
Returns a new array for each query.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
lapper.find(<span class="n">5</span>, <span class="n">11</span>).size <span class="o">==</span> <span class="n">2</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L148" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="find(start:Int32,stop:Int32,&amp;)-instance-method">
      <div class="signature">
        
        def <strong>find</strong>(start : Int32, stop : Int32, &)

        <a class="method-permalink" href="#find(start:Int32,stop:Int32,&)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop.
Takes a block that accepts an interval.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
total <span class="o">=</span> <span class="n">0</span>
lapper.find(<span class="n">5</span>, <span class="n">11</span>) { <span class="o">|</span>iv<span class="o">|</span> total += <span class="n">1</span> }
total <span class="c"># =&gt; 2</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L195" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="intervals:Array(Lapper::Interval(T))-instance-method">
      <div class="signature">
        
        def <strong>intervals</strong> : Array(<a href="../Lapper/Interval.html">Lapper::Interval</a>(T))

        <a class="method-permalink" href="#intervals:Array(Lapper::Interval(T))-instance-method">#</a>
      </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L115" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="seek(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method">
      <div class="signature">
        
        def <strong>seek</strong>(start : Int32, stop : Int32, ivs : Array(<a href="../Lapper/Interval.html">Lapper::Interval</a>(T)))

        <a class="method-permalink" href="#seek(start:Int32,stop:Int32,ivs:Array(Lapper::Interval(T)))-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop when queries are in sorted (by start) order.
This variant adds to an array ref that is passed in.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
cursor <span class="o">=</span> <span class="n">0</span>
ivs <span class="o">=</span> <span class="o">[]</span> <span class="k">of</span> <span class="t">Interval</span>(<span class="t">Int32</span>)
lapper.intervals.each <span class="k">do</span> <span class="o">|</span>i<span class="o">|</span>
  lapper.seek(i.start, i.stop, ivs)
  ivs.size <span class="o">==</span> <span class="n">1</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L285" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="seek(start:Int32,stop:Int32)-instance-method">
      <div class="signature">
        
        def <strong>seek</strong>(start : Int32, stop : Int32)

        <a class="method-permalink" href="#seek(start:Int32,stop:Int32)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop when queries are in sorted (by start) order.
It uses a linear search from the last query instead of a binary search. A reference to a
cursor must be passed in. This reference will be modified and should be reused in the next
query. This allows seek to not need to make mutate the lapper itself and be useable across
threads.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
cursor <span class="o">=</span> <span class="n">0</span>
lapper.intervals.each <span class="k">do</span> <span class="o">|</span>i<span class="o">|</span>
  lapper.seek(i.start, i.stop).size <span class="o">==</span> <span class="n">1</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L221" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="seek(start:Int32,stop:Int32,&amp;)-instance-method">
      <div class="signature">
        
        def <strong>seek</strong>(start : Int32, stop : Int32, &)

        <a class="method-permalink" href="#seek(start:Int32,stop:Int32,&)-instance-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>Find all intervals that overlap start .. stop when queries are in sorted (by start) order.
This variant takes a block that will be called for each found interval.</p>

<pre><code>data <span class="o">=</span> (<span class="n">0</span>..<span class="n">100</span>).step(by: <span class="n">5</span>).map { <span class="o">|</span>x<span class="o">|</span> <span class="t">Interval</span>(<span class="t">Int32</span>).<span class="k">new</span>(x, x <span class="o">+</span> <span class="n">2</span>, <span class="n">0</span>) }.to_a
lapper <span class="o">=</span> <span class="t">Lapper</span>(<span class="t">Int32</span>).<span class="k">new</span>(data)
cursor <span class="o">=</span> <span class="n">0</span>
lapper.intervals.each <span class="k">do</span> <span class="o">|</span>i<span class="o">|</span>
  size <span class="o">=</span> <span class="n">0</span>
  lapper.seek(i.start, i.stop) { <span class="o">|</span>iv<span class="o">|</span> size += <span class="n">1</span> }
  size <span class="o">==</span> <span class="n">1</span>
<span class="k">end</span></code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/sstadick/crystal-lapper/blob/edeb2b7e55332d0cb6a9e15f87c9584cd588c65e/src/lapper.cr#L254" target="_blank">View source</a>]
        
      </div>
    </div>
  




</div>

</body>
</html>
